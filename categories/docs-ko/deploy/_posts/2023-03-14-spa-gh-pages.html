---
title: Github Pages에 SPA 배포하기
tags: [SPA, gh-pages]
sidebar:
  nav: categories
permalink: "/categories/docs-ko/deploy/spa-gh-pages"
# article_header:
#   type: cover
#   image:
#     src: /imgs/SPA_Lifecycle.png
---

<!--more-->
<body>
  <body>
    <p>
      몇 날 며칠에 걸려, 겨우 React 기반 SPA를 배포하는 데 성공했습니다...
      <u>AWS</u>와 <u>Heroku</u> 배포는 여전히 애 먹고 있다는 사실이 저를
      애석하게 합니다만, React 프로젝트를 Github에 배포하고나니 다시 자신감이
      붙네요. 배포에 성공했으니, 복습 겸 실패 원인들을 다시 살피도록 하겠습니다.
      저를 골치 아프게 한 것은 (1) 유니콘, (2) 라우팅 크게 두 가지였습니다.
    </p>
    <h3>(1) 유니콘</h3>
    <div>
      <img
        src="https://i.namu.wiki/i/a_vYcmecWwxqTU5sdN6HTI0CUwd1qosXHtpCBwARyiggvT1K-CVc_F7rqRjFZL87dz2eJbJOvSUFBlNx-2wfJe8m91zAYmAtz4gGWeminKv1HxLQZG9t6i7k7zM-rbmU7Fp7mQg2AXHxJq_8uqIGHw.webp"
        alt="unicorn app logo"
      />
    </div>
    <p>
      사실 이 Unicorn 앱이 왜 프로젝트를 배포하는 데 걸림돌이 되는지, 그
      메커니즘은 아직도 잘 모릅니다. 다만, 유니콘을 사용하면 리눅스 환경에서
      프로그래밍할 때에 호스팅이 끊기다든지 하는 문제가 있다는 것을 최근에 알게
      되어, 유니콘 앱을 끄고 프로그래밍을 해봤는데 그 결과... 제 컴퓨터가 문제가
      아니라 이 유니콘이 문제였더군요. 자잘한 호스팅 문제는 집어치우고, 가장
      심각한 문제는 SSH Key를 생성할 때 발생했습니다.
    </p>
    <div>
      <img src="" alt="A random art of the SSH key generated in the terminal" />
    </div>
    <p>
      유니콘이 켜져 있을 때 SSH Key를 생성하면, 저 랜덤 이미지가 생성된 뒤에
      터미널이 멈춰버립니다. 위 이미지 속 경로를 따라가면 SSH Key가 생성이 되어
      있기는 한데, 그 Key가 Github Pages, AWS, Heroku 등 배포 서비스를 제공하는
      클라우드들과 잘 연동이 됐는지는 확인할 수가 없었습니다. 특히, AWS 배포시에
      계속해서 Runtime Error를 만났고, 아무리 구글링해서 해결책을 찾아본들,
      해결될 리가 없었습니다. 그 사람들은 유니콘 앱을 사용하지 않았을테니까요.
      문제는 바로 유니콘이었고, 유니콘을 끄고 난 뒤에는 정상적으로 SSH Key가
      생성됐습니다.
      <br />
      (이제 SSH Key를 생성했고, AWS에서 클라우드 컴퓨터를 만드는 과정까지도
      해봤기 때문에 다음 포스트 주제는 AWS와 Heroku 배포 방법이 될 것입니다!)
    </p>
    <h3>(2) 라우팅</h3>
    <p>
      단적으로, Github Pages는 SPA를 지원하지 않습니다. 그래서 조금 꼼수(?)를
      부려야 SPA를 만들수 있습니다.
    </p>
    <div><img src="" alt="Deployed page's home" /></div>
    <p>
      Framer Motion이라는 모듈로 구현한 기본 애니메이션들을 한 데 볼 수 있게끔
      라우팅을 하여 위와 같이 만들었습니다.
      <br />
      (URL:
      https://engulfedinflames.github.io/react_intermediate_framer-motion/)
    </p>
    <div><img src="" alt="SPA lifecycle" /></div>
    <p>
      일반적으로 어플리케이션은 새로운 페이지를 요청할 때마다 필요한 정적
      자원들(HTML, CSS, JS 등)을 다운로드 합니다. 즉, 페이지가 다시
      렌더링됩니다. 반면, SPA는 최초 요청시 필요한 정적 자원들을 한 번에
      다운로드합니다. 그리고 새로운 요청이 있을 때는 필요한 데이터만 가지고 와서
      상태가 변화한 컴포넌트를 다시 렌더링합니다. React의 장점이 바로 이
      컴포넌터의 상태 관리가 유용하다는 점입니다. 페이지 전체를 다시 렌더링하는
      것보다는 변화한 컴포넌트만을 다시 렌더링하는 것이 컴퓨터 연산 측면에서
      득이 되기 때문입니다.
    </p>
    <p>
      그런데 Github Pages는 이 SPA를 지원하지 않습니다. 그래서 최초 요청
      이후에는 새롭게 정적 자원들을 가지고 오지 않기 때문에, 새로고침을
      한다든지, 같은 레벨의 페이지를 두 번 이상 오가게 되면, 어플리케이션에서는
      제공할 정적 자원이 없게 됩니다. 그래서 404 Not Found 오류가 발생합니다.
    </p>
    <div><img src="" alt="404 Not Found" /></div>
    <p>이어서...</p>
  </body>
</body>
