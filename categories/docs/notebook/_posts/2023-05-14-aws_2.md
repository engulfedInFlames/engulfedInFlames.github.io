---
title: AWS 기본 (2) &#58; 기본 개념 정리
tags: [aws]
sidebar:
  nav: categories
permalink: /categories/docs/notebook/aws_2/
article_header:
  type: cover
  image:
    src: /assets/images/docs/notebook/aws-banner.png
---

<div class="article__content" markdown="1">

&ensp; 지난 포스트에 이어 계속됩니다.

---

## ✅ Elastic Block Store (EBS)

### EBS란?

&ensp; EBS는 EC2용으로 설계된 고성능 저장소이다. EC2가 컴퓨터라면, EBS는 EC2를 백업할 수 있는 외장 메모리라 할 수 있다. EBS로 백업해 놓은 상태라면 EC2를 삭제했더라도 다시 살릴 수 있다. 한 AZ 안에서만 재사용할 수 있다는 한계가 있다.

### EBS 스냅샷(snapshot)

&ensp; EBS 스냅샷으로 EBS의 데이터를 백업할 수 있다. EBS 스냅샷은 백업할 때마다 모든 데이터를 다시 백업하는 것이 아닌, 마지막 백업으로부터 변경된 데이터만을 백업하기 때문에 백업 시간을 절약할 수 있다. EBS 자체 보다는 스냅샷으로 가지고 있는 것이 리소스 면에서 더 저렴하며, 또, 스냅샷은 다른 리전으로 전송 가능하다는 장점이 있다.

### 볼륨(volume) ID

&ensp; 생성된 인스턴스의 스토리지(storage) 탭에서 볼륨 ID를 확인할 수 있다. 이 볼륨이 EBS이다. 사이드바의 EBS 탭에서도 확인할 수 있다. 볼륨의 생성 및 설정은 인스턴스 생성창에서도 수행할 수 있다.

### 🛠️ 연습

1. 볼륨을 생성하고 내 인스턴스에 연결해보자.
2. 스냅샷을 만들어보자.

&ensp; **한편으로, 볼륨이든 스냅샷이든 사용하지 않을 때는 작동을 멈추거나 삭제해야 한다. 그렇지 않으면 요금이 발생할 수 있다.**

<br/>

## ✅ Amazon Machine Image (AMI)

### AMI란?

&ensp; AMI는 EC2 생성을 위한 스냅샷이라고 할 수 있다. 로컬에서 컴퓨터를 설치하면, OS를 선택하고, 필요한 애플리케이션이나 라이브러리를 설치하는 것과 마찬가지로, 각 이미지는 각자 별도의 OS, 애플리케이션, 라이브러리 등의 정보를 제공한다.

&ensp; 이 이미지를 사용함으로써 이미 구성되고 검증된 환경을 재사용할 수 있으며, 처음부터 환경을 구축할 필요가 없기 때문에 더 쉽게 커스터마이징 할 수 있다. AWS에서 제공하는 것 뿐만 아니라, 개인 직접 만들어 공유할 수도 있다.

### AMI vs EBS

&ensp; AMI는 인스턴스가 생성되기 전에 사용하고, EBS는 인스턴스가 생성된 후에 사용한다는 점에서 차이가 있다. 물론, EBS 스냅샷을 AMI로 사용할 수도 있으나, 사용하는 시기에서 차이가 있음을 염두에 두자.

### 🛠️ 연습

1. AMI를 직접 생성해보자.
2. 생성한 AMI로 인스턴스를 생성하고, SSH로 인스턴스가 잘 복사됐는지 확인해보자.

<br/>

## ✅ Elastic Load Balancer (ELB)

### 가용성과 확장성

&ensp; ELB를 알기 전에 다음의 두 개념을 이해할 필요가 있다.

- 가용성(availability) : 서버, 네트워크, 프로그램 등에 오랜 기간 지속적으로 정상 운영되게 하기 위한 시스템 속성이다.

- 확장성(scalability) : 증대되는 작업량을 처리하기 위한 시스템 속성이다. 크게 수평 확장과 수직 확장, 둘로 나뉜다. 수평 확장은 작업량이 증대됐을 때 서버 개수를 늘리는 것, 수직 확장은 서버의 크기를 늘리는 것을 의미한다. 수평 확장은 고가용성과 공통되는 특징이 있으나, 용도 면에서 차이가 있다.

### 로드 밸런서란?

&ensp; 로드 밸런서는 대량의 트래픽을 EC2 인스턴스들에 적절히 분배하여 할당함으로써, 부하가 발생하지 않게 조절한다. 로드 밸런서에는 다음과 같은 특징이 있다.

- 트래픽 분산 : EC2와 연동하여 트래픽을 분산하고 부하를 줄인다.

- 단일 액세스 포인트 공개 : EC2s 실행하면, 퍼블릭 IP도 여럿 생기는데, 사용자들이 이 각각의 IP에 접속하지 않고, 로드 밸런서가 관리하는 하나의 IP(단일 액세스 포인트)만으로 접속하게 할 수 있다.

- 인스턴스에 대한 헬스 체크 : 인스턴스의 상태가 정상인지 아닌지 검사할 수 있다.

- HTTPS 제공 : ACM과 연동하여 https로 연결할 수 있다.

- 고가용성 제공 : 한 인스턴스가 비정상이 되도, 다른 인스턴스를 통해 접속할 수 있다.

- 공개 트래픽(외부)과 내부 트래픽(로드 밸런서와 인스턴스 간)을 분리할 수 있다.

### 보안 그룹

&ensp; 사용자가 로드 밸런서와 통신할 때, 로드 밸런서와 EC2s가 통신할 때, 각각 보안 그룹을 설정해야 한다. 사용자와 로드 밸런서 간에 통신할 때는 http 또는 https로 모든 IP에 공개하는 것이 일반적이다. 로드 밸런서와 EC2s 간에 통신할 때는 EC2s의 IP들을 한 데 묶어 보안 그룹의 출처를 로드 밸런서에게만 알린다.

### 🛠️ 연습

1.  두 개의 인스턴스를 생성하고 로드 밸런서와 연결해보자. 인스턴스 생성시 고급 옵션의 _User data - optional_ 필드에 다음의 코드를 입력한다.

```
#!/bin/bash
apt-get update
apt-get install -y nginx
cat <<EOF > /var/www/html/index.html
<!DOCTYPE html>
<html>
<head>
<title>Welcome to Nginx</title>
</head>
<body>
<h1>Hello World!</h1>
<p>AWS deployed by Me!</p>
<p>private ip is $(hostname -f)</p>
</body>
</html>
EOF
sudo systemctl start nginx
```

</div>
