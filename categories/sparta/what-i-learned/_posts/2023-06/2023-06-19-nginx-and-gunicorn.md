---
title: NGINX vs Gunicorn
tags: [NGINX, Guicorn]
sidebar:
  nav: categories
permalink: /categories/sparta/what-i-learned/nginx-and-gunicorn/
article_header:
  type: cover
  image:
    src: /assets/images/sparta/wil/nginx-and-gunicorn/nginx-and-gunicorn.png
---

<div class="article__content" markdown="1">

&ensp; 리액트 앱을 배포할 때는 번들 파일만 있으면, 곧바로 엔지닉스에 리버스 프록시를 할 수 있습니다. 하지만 장고(파이썬) 앱을 배포할 때는 으레 규니콘을 경유하여 엔지닉스에 리스폰스하는 것이 관례입니다. 하지만 결론만 보면 리액트든, 장고든 처리된 데이터가 리버스 프록시로 클라이언트에게 리스폰스된다는 점에서는 동일합니다. 그렇다면 왜 장고 앱은 규니콘을 경유해야만 하는 것일까요?

---

## ✅ 웹 서버

> 웹 서버: 웹에 연결된 다른 기기들이(브라우저) 서버와 데이터를 주고 받을 수 있도록 하는 소프트웨어

&ensp; 장고 앱 배포에 규니콘 설치가 필수는 아닙니다. 예전에는 엔지닉스와 같은 웹 서버만이 있었고, 웹 서버는 클라이언트의 리퀘스트가 들어오면 리퀘스트한 데이터(정적 파일들)들을 반환하는 식이었습니다. 이렇게 되면 파일을 반환하고, 그것을 캐싱시키기는 것만으로 사이트 퍼포먼스 측면에서 강점을 가지고 가는 것입니다.

&ensp; 하지만 이 같은 방식으로는 오직 정적 파일들만을 반환할 수 있습니다. 오늘날같이 요청이 다양하고 복잡한 상황에서는 웹 서버만을 사용하는 방식에는 분명한 한계가 있는 것입니다. 그래서 **웹 애플리케이션 서버**가 등장합니다.

<br/>

## ✅ 웹 애플리케이션 서버

&ensp; 웹 애플리케이션 서버는 파일 데이터를 저장하는 것 대신, 파이썬 스크립트를 서버에 저장합니다. 그래서 요청이 들어오면 파일 데이터를 반환하는 것 대신, 파이썬 스크립트에 작성된 코드를 실행합니다. **그렇다면 이 파이썬 스크립트는 어떻게 HTTP 리퀘스트를 이해하고, 또 그것을 HTTP 응답으로 반환하는 것일까요?**

&ensp; 가령, 엔지닉스는 특정 HTTP 리퀘스트가 들어오면, 해당 URL에 지정된 `html` 파일을 반환하여, 클라이언트의 브라우저에 렌더링합니다. 하지만 규니콘의 스크립트는 반환 목적으로 작성된 것이 아니기 때문에, 다른 방식으로 리퀘스트를 처리해야 합니다. 이때 **WSGI**가 등장합니다.

<br/>

## ✅ WSGI(Web Server Gateway Interface)

&ensp; WSGI는 이름 그대로 게이트웨잉 역할을 하는 인터페이스입니다. HTTP 리퀘스트가 들어오면, WSGI는 이를 파이썬용 표준 입력 형식(stdin)으로 변환하고, 이를 파이썬 앱에 전달합니다. 이어 파이썬 앱이 리스폰스하면, 이 리스폰스는 파이썬용 표준 출력 형식(stdout)이므로, 엔지닉스가 이해할 수 있게 다시 HTTP 리스폰스로 변환합니다.

&ensp; 이처럼 리퀘스트와 리스폰스를 변환하는 작업은 WSGI만이 할 수 있는 일은 아닙니다. 하지만 WSGI는 리퀘스트가 들어왔을 때, 필요한 스크립트만을 실행시킬 수 있다는 강점이 있습니다. 그전에는 리퀘스트가 들어오면 스크립트 전체를 실행했기 때문에, WSGI의 방식은 속도 면에서 분명 유리하며, 이 덕분에 WSGI가 파이썬의 표준 웹 애플리케이션 서버가 될 수 있었습니다.

<br/>

## ✅ 규니콘

&ensp; 규니콘은 WSGI의 일종입니다. WSGI는 멀티 쓰레드를 생성할 수 있기 때문에 트래픽이 증대하더라도, 이를 효율적으로 처리할 수 있습니다. 단지, 개발 환경에서는 트래픽이 증대할 일이 거의 없기 때문에, 굳이 규니콘을 사용할 이유가 없고, 그래서 `python manage.py runserver`로 앱을 실행하는 것입니다. 게다가, 규니콘은 보안과 성능 면에서도 강점이 있기 때문에, 배포 환경에서는 규니콘을 사용하는 것이 득이 됩니다.

<br/>

## ✅ 결론

&ensp; 엔지닉스와 규니콘 둘 중 하나를 사용하지 않더라도, 배포 자체에는 지장이 없습니다. 하지만 엔지닉스가 제공하는 이점들, 규니콘이 제공하는 이점들이 조금씩 다르기 때문에, 둘의 이점들을 모두 챙기기 위해서는 조금 번거로워지더라도 엔지닉스와 규니콘 둘 모두를 사용하는 것이 바람직합니다.

---

## 📚 출처

[Nginx와 Gunicorn 둘 중 하나만 써도 될까?](https://velog.io/@jimin_lee/Nginx%EC%99%80-Gunicorn-%EB%91%98-%EC%A4%91-%ED%95%98%EB%82%98%EB%A7%8C-%EC%8D%A8%EB%8F%84-%EB%90%A0%EA%B9%8C)

</div>
