---
title: Jekyll에서 Gatsby로 블로그 이전 (1) &#58; Build
tags: [Gatsby, React, GraphQL]
sidebar:
  nav: categories
permalink: "/categories/sparta/what-i-learned/3"
article_header:
  type: cover
  image:
    src:
---

<!-- more-->

<br/>

&nbsp;&nbsp; 이번 포스트에서는 제킬에서 개츠비로 블로그 이전하는 과정을 다루겠습니다.

&nbsp;&nbsp; 그에 앞서 블로그를 옮기고자 결심한 이유는 다음의 3가지입니다.

1. 루비나 제킬을 블로그를 꾸밀 때 외에는 사용하지 않기 때문에
2. JSX 코드 블럭을 지원하지 않기 때문에
3. 리액트를 포함하여 최신 프레임워크들로 블로그를 만들고 싶기 때문에

&nbsp;&nbsp; 블로그를 화려하게 꾸밀 생각은 없었지만, 제킬로 블로그를 확장하는데 분명한 한계가 있었고, 또 이를 극복하기 위해 제킬을 공부하는 것은 현재로서 시간 낭비라고 판단했습니다. 그래서 리액트 기반으로 블로그를 생성할 수 있는 개츠비로 넘어가자고 결심했습니다. 개츠비로 훨씬 더 깔끔하고 동적인 느낌의 블로그를 생성할 수 있기 때문입니다.

&nbsp;&nbsp; 우선, 블로그에서 리액트, 타입스크립트, 그래프QL을 사용하기 위한 환경 설정만을 완료한 상태로, 이 과정에 대해 설명하겠습니다.

---

### (1) 개츠비 CLI 설치

&nbsp;&nbsp; 어디서든 개츠비 앱을 설치하기 위해 개츠비 CLI를 전역으로 설치합니다.

```zsh
npm install -g gatsby-cli
```

&nbsp;&nbsp; 그리고 콘솔에 <code>gatsby --version</code>을 입력하여 개츠비가 잘 설치됐는지 확인합니다.

<br/>

### (2) 테마 선택

&nbsp;&nbsp; 개츠비가 공식 지원하는 블로그 스타터(테마)는 몇 가지 안 됩니다. 걔중에서도 삭제됐는지 접근 조차 안 되는 것도 있고, 제 컴퓨터에서 실행조차 안 되는 것도 있습니다. 그래서 결국 [기본 블로그 스타터](https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/)를 선택했습니다. 가장 흔히 쓰이는 테마이기도 합니다.

&nbsp;&nbsp; 이제 원하는 디렉토리에 블로그 스타터를 설치합니다. 저는 "myblog"라는 폴더명으로 개츠비 앱을 설치했습니다.

```zsh
# gatsby new my-app gatsby-repo-url
gatsby new myblog https://github.com/gatsbyjs/gatsby-starter-hello-world
```

&nbsp;&nbsp; 설치하고 나서 콘솔창에 <code>cd myblog</code>, <code>gatsby develop</code>를 차례대로 입력하면 개츠비가 자동으로 필요한 설정을 끝마칩니다. 개츠비 CLI가 입력해야 할 명령어를 친절하게 알려주기 때문에 순서에 맞게 입력만 하면 됩니다. 또, 어떤 URL로 가야 하는지도 알려줍니다. 기본적으로 개츠비는 포트 번호 8000을 사용하기 때문에, localhost라면 주소창에 "http://localhost:8000/"을 입력하면 됩니다.

<br/>

### (3) src/pages/index.js

<br/>

<div align="center">
<img src="/assets/images/sparta/wil/gatsby_01.png" alt=""/>
</div>

<br/>

&nbsp;&nbsp; 제킬과 마찬가지로 폴더명이나 파일명을 조건에 맞추어 작성하면 개츠비가 자동으로 특정 작업을 수행합니다. 가령 <code>index.tsx</code>는 홈("/") 주소에서 렌더링됩니다. 그외 <code>404.tsx</code>는 여타 404 페이지와 동일한 역할을 합니다. (처음에는 tsx가 아닌 js 파일로 생성되어 있습니다.)

<br/>

### (4) 파일 살펴보기

&nbsp;&nbsp; 먼저, <code>index.tsx</code>가 위치한 <code>/src</code>는 사이트의 프론트엔드에서 보여질 내용들을 담고 있습니다.

&nbsp;&nbsp; 다음으로, <code>gatsby-browser.js</code>는 브라우저에서 사용할 모든 API 코드들을 작성하는 파일입니다. 이름 그대로 브라우저에 영향을 미치는 코드들을 모아두는 파일입니다. 브라우저(클라이언트)의 커스터마이징이나 확장 기능 설치시에 필요합니다.

&nbsp;&nbsp; 다음으로, <code>gatsby-config.js</code>는 사이트를 빌드할 때 메인이 되는 환경 설정 코드들을 모아 놓은 파일입니다. 사이트에 대한 메타 데이터라든지, 사이트에서 사용하는 플러그인들을 명시할 수 있습니다.

&nbsp;&nbsp; 다음으로, <code>gatsby-node.js</code>는 노드 API 코드들을 작성하는 파일입니다. 빌드 과정에서 커스터마이징이나 확장 기능 설치시에 필요합니다.

&nbsp;&nbsp; 마지막으로, <code>gatsby-ssr.js</code>는 ssr, 즉 서버 사이드 렌더링(server-side rendering) API 코드들을 작성하는 파일입니다. 서버 사이드 렌더링에 영향을 미치는 커스터마이징을 허용합니다.

<br/>

### (5) GraphQL

&nbsp;&nbsp; 그래프QL에 대해서는 아직 자세히 공부한 바가 없습니다만, 우선 시각적으로 유용한 API 쿼리 언어 정도로 알면 될 것 같습니다.

&nbsp;&nbsp; 일반적으로 데이터는 유저가 해당 페이지에 위치할 때 요청됩니다. 특정 URL로 이동하면, 해당 URL에 할당된 API 쿼리문이 실행됩니다.

&nbsp;&nbsp; 반면, 그래프QL은 유저가 사이트에 처음 접속했을 때, 특정 페이지로 이동하지 않아도, 그 특정 페이지에서 필요로 하는 쿼리문을 실행할 수 있습니다. 따라서, 동적 데이터를 가지고 오는 것이 더 빠르고, 더 자연스러운 렌더링을 경험할 수 있습니다.

&nbsp;&nbsp; 개츠비는 API 쿼리 수단으로 그래프QL을 사용하며, 기능 또한 기본 제공합니다. 필요하다면 개츠비에서 제공하는 플러그인도 설치할 수 있습니다.

---

**출처**

[Setting up a TypeScript and Gatsby project with GraphQL](https://blog.logrocket.com/set-up-typescript-gatsby-project-graphql/)
